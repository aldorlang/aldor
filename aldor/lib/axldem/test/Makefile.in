###############################################################################
#
# Makefile
#
# Make program to test the AXIOM-XL compiler.
#
# Copyright (c) 1990-2007 Aldor Software Organization Ltd (Aldor.org).
#
###############################################################################

# ..From autoconf
@SET_MAKE@

VPATH = @srcdir@
abs_top_builddir = @abs_top_builddir@
srcdir = @srcdir@
top_builddir = @top_builddir@
builddir = @builddir@
abs_top_srcdir = @abs_top_srcdir@
subdir = lib/libaxldem/test
prefix = @prefix@

# Check the makefile
.PRECIOUS: Makefile
Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
	@case '$?' in \
	  *config.status*) \
	    cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh;; \
	  *) \
	    echo ' cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ '; \
	    cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ ;; \
	esac;


ALDOR=aldor
TESTALDOR=testaldor

ALDORROOT=$(prefix)
IncDir	= $(ALDORROOT)/include
LibDir	= $(ALDORROOT)/lib
BinDir	= $(ALDORROOT)/bin
SamDir	= $(ALDORROOT)/share/samples/test

CP	= cp -p
RM	= rm -f

TESTDEMOLIB = hilbert1.as gbtest1.as catdef2.as type6.as f21.as intfact.as iroots.as
TESTS = $(TESTDEMOLIB)

HELPS = 
#
# This list is sorted alphabetically
#

DIAGS	= 
FUTURE	= 
# float2.as:   of_emerg.c aliasing problem
# default8.as: function used as value in unexpected way.
# gbtest1.as:  only fails under Win32
# where2.as:   confused by default within a where block

BUGS=

TIMINGS = 

OKFILES = Makefile $(TESTS) $(BUGS)

OLDALDOR = aldor

installcheck: tests

junk::
	@ ls -d $(OKFILES) * | sort | grep -v CVS | uniq -u

mostlyclean::
	@ $(RM) *~

testaldor_call=env PATH=$$PATH:$(ALDORROOT)/bin:$(tooldir)/bin ALDORROOT=$(ALDORROOT) \
	       ALDORARGS="$(TESTAXLARGS)"  $(TESTALDOR) 

tests:
	@$(testaldor_call) -oldaxl $(OLDALDOR) $(TESTS)
	@echo "BUGS = $(BUGS)"

testexecs:
	@$(testaldor_call) -only testrun -oldaxl $(OLDALDOR) $(TESTS)
	@ echo "BUGS = $(BUGS)"

testcomp:
	@-$(testaldor_call) -only testcomp $(TESTS)

testgen:
	@-$(testaldor_call) -only testgen $(TESTS)

errors:
	@-$(testaldor_call) -only testerr $(TESTS)

testsh:
	@-$(testaldor_call) `for i in $(TESTS) ; do echo $$i | grep '\.sh$$' ; done` 


opttests: TESTAXLARGS="ALDORARGS=-O"
opttests:
	$(testaldor_call) -only testrun -oldaxl $(OLDALDOR) $(TESTS)

install-tests:;      @-$(testaldor_call) -install -oldc $(OLDALDOR) $(TESTS)
install-tests-comp:; @-$(testaldor_call) -install -only testcomp $(TESTS)
install-tests-gen:;  @-$(testaldor_call) -install -only testgen $(TESTS)

.PHONY: install-tests install-tests-comp install-tests-gen

all:
.PHONY: all

installcheck: tests
.PHONY: installcheck

clean: mostlyclean
distclean: clean 
	rm Makefile

maintainer-clean: distclean

EMPTY_AUTOMAKE_TARGETS  = dvi pdf ps info html tags ctags
EMPTY_AUTOMAKE_TARGETS += install install-data install-exec uninstall
EMPTY_AUTOMAKE_TARGETS += install-dvi install-html install-info install-ps install-pdf
EMPTY_AUTOMAKE_TARGETS += installdirs
EMPTY_AUTOMAKE_TARGETS += check 

.PHONY: $(EMPTY_AUTOMAKE_TARGETS)
$(EMPTY_AUTOMAKE_TARGETS):
